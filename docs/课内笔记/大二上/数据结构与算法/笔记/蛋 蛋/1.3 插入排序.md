# 3.插入排序

## 3.1 算法原理

插入排序（Insertion Sort）的核心思想是：

将数组分为连续的两块区域：有序区和无序区。每次从无序区中取出一个元素，插入到有序区的合适位置中。

初始第一个元素自己有序，剩余n-1个元素构成无序区，遍历无序区元素排序。

## 3.2 代码实现

用`i`控制遍历次数，遍历范围$[1,n - 1]$，共计n-1次，从`1`开始使得`i`可以同时指向无序区的第一个元素。

用指针`j`指向当前元素的位置，初始为无序区的第一个位置。随后向前遍历，每次比较`j`与前一个位置`j-1`元素的大小，如果$arr[j-1]>arr[j]$则交换这两个元素，使得二者有序；随后`j`指针前移，继续向前比较，直到$arr[j-1]<arr[j]$，由于左侧是有序区，遍历结束。

另一个循环结束的条件是`j>0`，`j`指向待插入元素，当其为0时，当前元素为最小值，不用继续遍历。

```java
public static void insertionSort(int[] arr) {
    int n = arr.length;
    for (int i = 1; i < n; i++) {
        for (int j = i; j > 0 && arr[j] < arr[j - 1]; j--) {
            swap(arr, j, j - 1);
        }
    }
}
```

## 3.3 复杂度分析

### 3.3.1 时间复杂度

- 最好情况：*O(n)*，数组有序情况下每轮只需1次比较；
- 平均情况：*O(n²)*；
- 最坏情况：*O(n²)*。

### 3.3.2 空间复杂度

原地排序，空间复杂度*O(1)*。