# 第五章 软件生产过程经济分析

简单公式：
$$
(\frac{S}{E})^3=Kt^4_d=D_0t_d^7
$$

$$
K=D_0t_d^3
$$

$$
D_0=\frac{D}{t_d}
$$

$$
m_{od}=\frac{K}{t_d\times \sqrt{6e}}
$$

如果涉及到“中型软件”，计算会相对复杂，需要参考后面的公式。

## 软件生产函数和软件生产率

生产函数：软件项目开发中，投入要素和产出之间的关系。我们可以通过此函数，计算出投入多少成本可以让产出效果最好。函数：
$$
Y=F(K，L，N，O，t)
$$
K, L, N, O：资本、劳动、土地、组织管理；t：时间/工期；Y：软件的产出量。

一般忽略 N 和 O，写为：
$$
Y=F(K，L，t)
$$
即产出只和资本、劳动和工期有关。

C-D 生产函数：
$$
Y=AL^αK^β
$$
C-D 生产函数：其中的 $\alpha$ 代表劳动力增加百分比会使产出增加百分比的多少倍。比如，如果 $\alpha$ =2，那么假设劳动力投入增加了 1%，那么产出就会增加 2% 而非 1%。同理，$\beta$ 是指资本投入量的增加百分比。

### 规模经济的定义

当全部投入要素按某种配合方式以相同比例增加时，如果产出的增长比例大于投入要素配合方式增加的比例，则称企业(或厂商)享有递增规模报酬(或规模经济)。

解释：假设投入的劳动力和工时都变为了两倍，此时产出量变为四倍，由于大于两倍，说明当前生产活动呈规模报酬递增（规模经济）。

对C-D生产函数容易验证有如下结论:
(1) 若*α*+*β*>1，则该生产活动呈规模报酬递增(规模经济);

(2) 若*α*+*β*<1，则该生产活动呈规模报酬递减(非规模经 济);

(3) 若*α*+*β*=1，则该生产活动呈规模报酬固定

求解两个系数 $\alpha$ 和 $\beta$：P166

### 软件生产函数

$$
S=EK^{\frac{1}{3}}t_d^{\frac{4}{3}}
$$

这个公式其实就是生产函数代入了 $\alpha$ 和 $\beta$ 的值，并且

在软件行业，我们认为 $\alpha=\frac{1}{3}$，$\beta=\frac{4}{3}$。S 表示产出量，对应软件源代码的行数（NCSS）；E 表示环境因子，即某个项目组自身的因素对软件产出的影响；K 表示软件项目投入的总工作量（劳动量），单位为“人年”；td 表示工期（年）。

由于 $\alpha+\beta=\frac{5}{3}>1$，因此软件项目属于规模经济。

### 软件生产率

软件劳动生产率：每个人月交付的源代码程序量（NCSS/PM）。

生产率主要受组织管理因素、技术因素影响。

## 软件生产过程经济分析

本节主要介绍在不同的软件类型下软件的主要工程经济参数，如生产规模（代码行数）、工作量（人数）、投入费用、劳动生产率、环境因子、成本等的相互数量关系。

系统动力学方程：采用诺顿-瑞利方程（N-R 模型），其变量表如下：

![image-20250526184546327](https://telegraph-image-5ms.pages.dev/file/BQACAgUAAyEGAASIfjD1AAIBQGibSK87gaOut0UhYB3-sdb5HTXQAAIyGgACnTzhVJLbwR4LXkRkNgQ.png)

其中 $t_d$ 其实是工期；

$F_c$：每人年需要花费多少钱投入

$F_d$：劳动生产率，即每个人年交付的代码量。

### 重要假设

1. 软件开发中投入的总工作量 K 是有限的

2. C(t) 在项目开始时为 0（因为尚没有工作），然后单调增长到 K（在 t=生命末期时等于 K）

3. 任何时刻开发项目组投入的人力数*m*(*t*)与尚待解决的问题(或尚需投入)的累计人力工作量成正比

   即剩余的工作量越多，投入的人力越多；即 m(t) 与 K-C(t)（软件剩余的开发工作量）成正比。

4. 在项目生存周期中，项目开发人员由于不断的学习， 因而其开发效率可用关于时间 *t* 的学习函数 *p*(*t*) 来描述，其开发人力量 m(t) 与 *p*(*t*) 成正比，在多数情况下，可设学习函数有*p*(*t*)=2*bt*，*b*>0，*p*(*t*)是时间 *t* 的线性增函数。

   即 m(t) 与 p(t) 也成正比。

![image-20250526191709246](https://telegraph-image-5ms.pages.dev/file/BQACAgUAAyEGAASIfjD1AAIBQWibSLJ9gpn7JJvTcUw7JRCac8c8AAIzGgACnTzhVE40PnD8x9njNgQ.png)

此公式的解释：由于 m(t) 是 c(t) 的变化率，那么：
$$
m(t)=\frac{dC(t)}{dt}=p(t)[K-C(t)]
$$

> 由于 m(t) 和 p(t) 和 K-C(t) 成正比，因此直接把 m(t) 写成这两者的乘积了。
>
> 下面两个就是微分方程的初始条件，上面假设中已经提到了。

结果为：

![image-20250526192053431](https://telegraph-image-5ms.pages.dev/file/BQACAgUAAyEGAASIfjD1AAIBQmibSLUhoSKX1AQD3xESqrfQNwRGAAI0GgACnTzhVCmyk3i23ztoNgQ.png)

可以看出，C(t) 是随着时间单调递增的；m(t) 虽然不太好看，但我们可以背结论：m(t) 是随时间先增大后减小的。其极值为；$t_o=\frac{1}{\sqrt{2b}}$ 时取得，值为：
$$
m(t_o)=K\sqrt{2b}^{e^{-\frac{1}{2}}}
$$
因此，$t_o$ 是随着 b 的变化而变化的。人的学习率（b）越高，那么 $t_o$ 就越小。

通常认为，人力投入达到峰值的时刻 $t_o$ 即为软件准备好交付的时刻，也就是说 $t_o$ 就约等于软件的工期 $t_d$。

可以推导出如下公式：
$$
t_o=\frac{1}{\sqrt{2b}}=t_d
$$

$$
b=\frac{1}{2t_d^2}
$$

当 t=td 时，我们可以计算出 C(td) 和 m(td) 的值，即软件交付时的已完成工作量和投入率，为：
$$
C(t_d)=0.39K
$$
即软件交付之时，只花费了生存期内投入总人力费用的 39%，剩下的 61% 的人力费用将用于该软件系统在运行维护阶段的质量检验，可靠性增长，维护与修改等工作
$$
m(t_d)=\frac{K}{t_d}e^{-\frac{1}{2}}=\frac{K}{t_d\sqrt{e}}
$$
![image-20250526192815052](https://telegraph-image-5ms.pages.dev/file/BQACAgUAAyEGAASIfjD1AAIBQ2ibSLgwQ_-GDd269oYbQygm9TH5AAI1GgACnTzhVOgpzo39TbXSNgQ.png)

C(t) 是一个 s 型的曲线，单调递增，但是在 td 处增长最快；m(t) 在 td 处最大。

### 软件难度系数和人力增长率

软件工程的开发难度与生存期内投入的总工作量 *K* 成正比，与交付期的平方 $t_d^2$ 成反比。即工作量越大，工期越短，项目越难。

D：软件开发的难度系数，也是**人力密度增长率**。
$$
D=\frac{K}{t_d^2}
$$
比值*D*/td=*K*/$t^3_d$ 则基本上稳定在某一个常数周围。我们把这个常数定义为 $D_0$，有：
$$
D_0=\frac{D}{t_d}=\frac{K}{t_d^3}
$$
参数 $D_0$ 的取值：

软件是 一个与其他系统有多个接口和交互功能的全新软件：8

软件是一个新的独立系统：15

> 比如工业控制系统和汽车的操作系统

软件是从其他已开发的软件基础上建立的系统：27

> 比如为已有的软件开发一个插件

$D_0$ 越大，说明工期 td 相同的情况下，软件的开发难度越大。

> 从其他已开发软件基础上建立新系统时，因为需要看大量已有的代码，导致比全新开发还难；第一种不需要看接口实现，相比第二种可以用接口减轻自己的负担，因此最简单。

### 软件的劳动生产率和生产函数

在软件方面，S 产出由程序行数衡量，C(td) 表示开发阶段投入的工作量（不含维护阶段），因此开发阶段的劳动生产率为：
$$
F_d=\frac{S}{C(t_d)}=\frac{S}{0.93K}=E_0\times D^{-\frac{2}{3}}
$$
前面就是定义，后面是 Putnam 发现的东西。E0 表示环境因子，和 D 成反比；D 表示软件难度，难度越大，生产率 $F_d$ 越低。

软件总工作量和环境因子、成本投入和工期的关系为：
$$
S=0.39E_0\times K^{\frac{1}{3}}\times t^\frac{4}{3}_d
$$
E0 为环境因子，越大表示产出效率越好，一般和部门有关。

对软件项目管理来说，压缩时间是可以做到的，但同时它是以增加项目的难度和人力费用为代价的， 因此时间压缩不能太过分，否则将会导致项目难度及人力费 用的极大增加并进而增加项目管理的风险。

> 压缩 10% 工期，就会导致项目的工作量增加 40%，需要的人力增加 40%，难度系数 D 增加 60%。

### 设计编码阶段的经济要素分析

上面的 m(t) 表示整个软件生命周期中人力的投入；如果我只想关注一个小阶段（设计编码阶段）呢？

设 $K_d$ 表示软件开发阶段人力费用总量，$C_d(t)$ 表示软件开发阶段[0，*t*)时间段累计人力费用，$m_d(t)$ 表示软件开发阶段 *t* 时刻人力费用，$t_{od}$ 表示开发子周期（而非整个周期）内人力投入的峰值时刻。

$t_{od}$ 和 b 之间仍然存在关系：
$$
b=\frac{1}{2t_{od}^2}
$$

$$
t_{od}=\frac{1}{\sqrt{2b}}
$$



我们假设 t=$t_d$ 时，项目将投入 $K_d$（开发阶段总投入）的 95% 到项目中。

> 注意这里 $t_d$ 不是 $t_{od}$。$t_d$ 表示软件开发阶段的结束，交付的时间点；因此，此时开发编码阶段的投入应该基本结束。$t_{od}$ 没有现实中的对应节点。

软件项目总周期的*m*(*t*)与开发子周期的*md*(*t*)在 *t*=0时刻有相同的斜率，即二者难度相同。因此，*D* 既可以作为整个项目生存周期的难度系数，也可作为开发子周期的难度系数。但 $D_0$ 不可以同时作为整个开发阶段/设计编码阶段的人力增长率。
$$
K=6K_d\\t_{od}=\frac{t_d}{\sqrt{6}}\\D_0=\frac{\hat{D_0}}{\sqrt{6}}
$$
即项目的总成本中，只有 1/6 的成本用于设计编码阶段。开发阶段的人力增长率是整体人力增长率的 $\sqrt{6}$ 倍。

开发阶段的 $m_{od}$（某时刻人力投入）和 $C_d(t_{od})$（总人力投入）如下：
$$
m_{od}=\frac{K}{t_d\times \sqrt{6e}}
$$

$$
C_d(t_{od})=K_d(1-e^{-\frac{1}{2}})=0.39K_d
$$

$$
C_d(t_d)=K_d(1-e^{-3})=0.95K_d
$$

同样满足 $C_d(t_{od})=0.39K_d$，即软件开发周期投入峰值时，已投入工作量为开发周期总工作量的 0.39。

注意这边 Kd 是 1/6 K 而不是 K。

### 环境因子的测定

环境因子E是由软件工程项目的开发环境、技术状态(如开发方法、开发工具和设备项目管理状况等)所决定的。通常通过类比法测定环境因子，即通过此项目组已经开发过的软件测定其环境因子。

## 不同规模软件生产过程经济分析

对于规模大小不同的软件，软件工程项目的人力资源组织及其管理有较大的区别，因此经济分析方法有所不同。

设*Δ*1表示开发阶段时间区间(子周期)，*p*表示开发与 支持，*d*表示开发，*S*表示支持，那么可以得到：
$$
m_p(t)=m_d(t)+m_s(t)\\C_p(t)=C_d(t)+C_s(t)
$$
即总工作量/投入人力等于开发人力+支持人力。小型软件（行数小于 18000 行）时，$m_p(t)\approx m_d(t)$，$m_s(t)\approx 0$，即小型软件基本没有支持人力。大型软件中，人数几乎全部用在支持而非开发中，使 mp(t)与 m(t) 非常接近或基本重合。

小型软件：S<18000；中型：18000<S<70000 大型：S>70000

中型软件则呈现出 md(t)、mp(t)、m(t)三者分离的现象，而且随着S的增大，mp(t)与md(t)分离度越大。

![image-20250526203601635](https://telegraph-image-5ms.pages.dev/file/BQACAgUAAyEGAASIfjD1AAIBRGibSL329CZ8BhshbbqqYzuMibqqAAI2GgACnTzhVIxzXbUcaFg_NgQ.png)

<mark>**要求考试中会画**</mark>

小型和大型软件中不需要修改之前提到的分析方法；但由于中型软件中 md(t)，mp(t)，m(t) 三者分离，需要额外的处理。

a 值：规模参数，仅仅和 S（总产出量）有关：
$$
a(S)=1+6.23e^{-0.079S}
$$
<mark>**注意这里 S 的单位为 kNCSS，即几千行代码**</mark>。因此，如果项目包含 20000 行代码的话，这里应该填写 20。

对于小型软件，a(S)=$\sqrt{6}$；对于大型软件，a(S)=1。对于中型软件，采用上方的公式。

对于中型软件，有：
$$
K_p=\frac{K}{a^2}
$$

$$
t_{op}=\frac{t_d}{a}
$$

$$
m_{op}=\frac{\sqrt{6}}{a}m_{od}
$$

$$
C_p(t_d)=K_p(1-e^{-\frac{a^2}{2}})
$$

op 系列参数表示开发子周期中的内容。

Kp 和 Kd 不是一个东西。tod 和 top 也不是一个东西。

## 做题

打开局面的公式：
$$
(\frac{S}{E})^3=Kt_d^4=D_0t_d^7
$$
因此已知 S 总产出，E 环境因子就可以得到交付工期 $t_d$。

### 注意事项

- $D_0$ 题目中没给时可以预估 8/15/27，但是题目中需要求时千万不要预估一个 8/15/27，需要通过上方公式求一下。
